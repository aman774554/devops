# Docker Detailed Notes for Interviews

## 1. What is Docker?
Docker is an open-source platform that enables developers to automate the deployment, scaling, and management of applications using containerization. Containers allow applications to run consistently across different computing environments by packaging them with their dependencies.

## 2. What are the main components of Docker?
Docker consists of several core components:
- **Docker Engine**: The core software that runs and manages containers.
- **Docker Client**: A command-line tool to interact with the Docker Engine.
- **Docker Daemon**: A background service that manages container lifecycle.
- **Docker Image**: A read-only template used to create containers.
- **Docker Container**: A running instance of a Docker image.
- **Docker Registry**: A centralized storage for Docker images (e.g., Docker Hub, AWS ECR, Azure Container Registry).
- **Docker Compose**: A tool for defining and running multi-container Docker applications using a YAML file.

## 3. How is Docker different from Virtual Machines (VMs)?
| Feature         | Docker (Containers) | Virtual Machines (VMs) |
|---------------|------------------|-----------------|
| Isolation | Process-level | Full OS-level |
| Performance | Lightweight, fast | Heavy, slow |
| Boot Time | Seconds | Minutes |
| Resource Usage | Shares OS kernel | Requires full OS per VM |
| Portability | Highly portable | Less portable |

## 4. What is a Dockerfile?
A **Dockerfile** is a script containing instructions to build a Docker image. It includes:
- **FROM**: Specifies base image.
- **RUN**: Executes commands.
- **COPY/ADD**: Copies files from the host.
- **CMD/ENTRYPOINT**: Defines container startup command.
- **EXPOSE**: Defines ports for networking.

### Example Dockerfile:
```dockerfile
# Use official Python image
FROM python:3.9

# Set working directory
WORKDIR /app

# Copy application files
COPY . /app

# Install dependencies
RUN pip install -r requirements.txt

# Run application
CMD ["python", "app.py"]
```

## 5. What are Docker Images and Containers?
- **Docker Image**: A lightweight, stand-alone package with everything needed to run an application.
- **Docker Container**: A running instance of an image, providing an isolated environment.

### Commands to Work with Images and Containers:
```sh
# Pull an image from Docker Hub
docker pull nginx

# Run a container
docker run -d -p 80:80 nginx

# List running containers
docker ps

# Stop a container
docker stop <container_id>

# Remove a container
docker rm <container_id>
```

## 6. What is Docker Compose?
Docker Compose is a tool to define and manage multi-container Docker applications. It uses a `docker-compose.yml` file to configure application services.

### Example `docker-compose.yml` file:
```yaml
version: '3'
services:
  web:
    image: nginx
    ports:
      - "8080:80"
  database:
    image: mysql:5.7
    environment:
      MYSQL_ROOT_PASSWORD: root
```

## 7. What is Docker Networking?
Docker provides several networking modes:
- **Bridge**: Default network for standalone containers.
- **Host**: Uses the host machineâ€™s networking stack.
- **None**: Disables networking.
- **Overlay**: Enables multi-host communication.
- **Macvlan**: Assigns a MAC address to a container.

### Network Commands:
```sh
# List networks
docker network ls

# Create a custom network
docker network create my_network

# Connect a container to a network
docker network connect my_network <container_id>
```

## 8. What is a Docker Volume?
Docker Volumes are used to persist data generated by containers.

### Volume Commands:
```sh
# Create a volume
docker volume create my_volume

# List volumes
docker volume ls

# Mount a volume to a container
docker run -v my_volume:/data nginx
```

## 9. How do you optimize Docker Images?
- Use **small base images** (e.g., `alpine` instead of `ubuntu`).
- Reduce the number of **layers** in a Dockerfile.
- Use **multi-stage builds** to optimize image size.
- Remove **unnecessary dependencies** and files.
- Use **`.dockerignore`** to exclude unnecessary files.

## 10. How does Docker handle security?
- Use **non-root users** inside containers.
- Regularly **update images** to patch vulnerabilities.
- Limit container **privileges** (`--cap-drop=ALL`).
- Use **image scanning tools** (e.g., Docker Security Scan, Trivy).
- Implement **network segmentation** to isolate sensitive services.

## 11. What is Kubernetes, and how does it relate to Docker?
Kubernetes (K8s) is an open-source orchestration system for automating deployment, scaling, and management of containerized applications. Docker is often used as the container runtime for Kubernetes, though alternatives like **containerd** and **CRI-O** exist.

### Kubernetes vs. Docker Compose:
| Feature | Kubernetes | Docker Compose |
|---------|-----------|---------------|
| Complexity | High | Low |
| Scaling | Automatic | Manual |
| Load Balancing | Built-in | External |
| Multi-Host Support | Yes | No |

## 12. What are Docker Swarm and its key features?
Docker Swarm is Docker's native clustering and orchestration tool for managing multiple containers across different nodes.

### Key Features:
- **High availability**: Distributes services across multiple nodes.
- **Scalability**: Easily scale up or down containers.
- **Load balancing**: Inbuilt service discovery and routing.
- **Decentralized design**: Multiple manager nodes prevent single points of failure.

### Swarm Commands:
```sh
# Initialize a swarm
docker swarm init

# Add a worker node
docker swarm join --token <token> <manager-ip>:2377

# List swarm services
docker service ls
```

## 13. How do you troubleshoot Docker issues?
- Use `docker logs <container_id>` to check logs.
- Inspect containers with `docker inspect <container_id>`.
- Check running processes with `docker top <container_id>`.
- Monitor resource usage using `docker stats`.
- Restart Docker daemon using `systemctl restart docker`.

## Conclusion
Docker is a powerful containerization platform widely used in modern software development and DevOps practices. Understanding its architecture, commands, networking, storage, and orchestration is crucial for interviews and real-world applications.

